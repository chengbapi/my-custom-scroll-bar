(function(){$.fn.extend({customScrollBar:function(){var e=$("<div class='prev scrollBar_arrow'></div>"),t=$("<div class='next scrollBar_arrow'></div>"),n=$("<div class='v scrollBar'>"+"<div class='v scrollButtonWrapper'>"+"<div class='v scrollButton'></div>"+"</div>"+"</div>"),r=$("<div class='h scrollBar'>"+"<div class='h scrollButtonWrapper'>"+"<div class='h scrollButton'></div>"+"</div>"+"</div>"),i={arrow:false,vertical:true,horizental:true};return function(s){var o=this,u,a,s=$.extend(i,s),f=s.arrow,l=s.vertical,c=s.horizental;$(this).css({overflow:"hidden"});$(this).wrapInner("<div class='scrollBarWrapper'></div>");u=$(this).children(".scrollBarWrapper");if(l){u.after(n)}if(c){u.after(r)}if(f){u.siblings(".scrollBar").prepend(e).append(t)}u.add(".v.scrollBar",u.parent()).on("mousewheel DOMMouseScroll",function(e){e=e.originalEvent;if(e.wheelDelta){a=e.wheelDelta}else if(e.detail){a=-e.detail*40}u.customScrollBarRender({top:a,y:null});return false});u.nextAll(".scrollBar").on("mousedown",function(e){var t=$(e.target),n=t.hasClass("v");$(o).addClass("user_select_none");if(t.hasClass("scrollButton")){$(document).on("mousemove",function(e){if(n){u.customScrollBarRender({y:e.pageY,x:null})}else{u.customScrollBarRender({y:null,x:e.pageX})}});$(document).one("mouseup",function(e){$(document).off("mousemove");$(o).removeClass("user_select_none")})}if(t.hasClass("scrollButtonWrapper")){$(this).one("mouseup",function(e){if(n){u.customScrollBarRender({y:e.pageY,x:null})}else{u.customScrollBarRender({y:null,x:e.pageX})}$(o).removeClass("user_select_none")})}if(t.hasClass("scrollBar_arrow")){if(t.parent().hasClass("v")){if(t.hasClass("prev")){u.customScrollBarRender({top:240,y:null})}else{u.customScrollBarRender({top:-240,y:null})}}else{if(t.hasClass("prev")){u.customScrollBarRender({left:240,x:null})}else{u.customScrollBarRender({left:-240,x:null})}}}});u.customScrollBarRender({y:0,x:0});u.on("DOMSubtreeModified",function(){setTimeout(function(){u.customScrollBarRender()},1)});return this}}(),customScrollBarRender:function(e){var t=$(this).hasClass("scrollBarWrapper")?$(this):$(this).children(".scrollBarWrapper"),n=t.parent().width(),r=t.parent().height(),i=t.prevAll().not(".scrollBar"),s=t.nextAll().not(".scrollBar"),o,u,a,f,l,c,h=t.nextAll(".v.scrollBar"),p=h.children(".scrollBar_arrow").height(),d=h.width(),v=r,m=h.children(".scrollButtonWrapper"),g,y=h.offset(),b=y.left,w=y.top,E=h.find(".scrollButton"),S,x,T=t.nextAll(".h.scrollBar"),N=T.children(".scrollBar_arrow").width(),C=T.height(),k=n,L=T.children(".scrollButtonWrapper"),A,O=T.offset(),M=O.left,_=O.top,D=T.find(".scrollButton"),P,H,B,j,F;t.prepend(i);t.append(s);t.css({position:"absolute",width:n,height:r});t.css({width:"auto",height:"auto"});o=t.width()+d;u=t.height()+C;t.css({width:n,height:r});l=o/n;c=u/r;if(c>1&&l>1){v-=C;k-=d}g=v-2*p;A=k-2*N;h.height(v);T.width(k);m.css({height:g,top:p});L.css({width:A,left:N});if(c>1){h.show();S=g/c;E.height(S);if(!e){a=-parseFloat(t.css("top"));x=a/u*v}else if(e.y!==null){x=e.y-w-.5*S-p}else if(e.top!==undefined){x=parseFloat(E.css("top"))-e.top/u*S}B=g-S;x=x<0?0:x;x=x>B?B:x;j=x/g;t.css({top:-j*u});E.css({top:x})}else{h.hide()}if(l>1){T.show();P=A/l;D.width(P);if(!e){f=-parseFloat(t.css("left"));H=f/o*k}else if(e.x!==null){H=e.x-M-.5*P}else if(e.left!==undefined){H=parseFloat(D.css("left"))-e.left/o*P}B=A-P;H=H<0?0:H;H=H>B?B:H;F=H/A;t.css({left:-F*o});D.css({left:H})}else{T.hide()}}})})(jQuery)
