(function(c){c.fn.extend({customScrollBar:function(){var f=c("<div class='prev scrollBar_arrow'></div>"),d=c("<div class='next scrollBar_arrow'></div>"),h=c("<div class='v scrollBar'><div class='v scrollButtonWrapper'><div class='v scrollButton'></div></div></div>"),j=c("<div class='h scrollBar'><div class='h scrollButtonWrapper'><div class='h scrollButton'></div></div></div>"),k={arrow:false,vertical:true,horizental:true};return function(g){var l=this,b,e,g=c.extend(k,g),q=g.arrow,m=g.vertical,g=g.horizental;c(this).css({overflow:"hidden"});c(this).wrapInner("<div class='scrollBarWrapper'></div>");b=c(this).children(".scrollBarWrapper");m&&b.after(h);g&&b.after(j);q&&b.siblings(".scrollBar").prepend(f).append(d);b.add(".v.scrollBar",b.parent()).on("mousewheel DOMMouseScroll",function(a){a=a.originalEvent;a.wheelDelta?e=a.wheelDelta:a.detail&&(e=-a.detail*40);b.customScrollBarRender({top:e,y:null});return false});b.nextAll(".scrollBar").on("mousedown",function(a){var a=c(a.target),d=a.hasClass("v");c(l).addClass("user_select_none");a.hasClass("scrollButton")&&(c(document).on("mousemove",function(a){setTimeout(function(){d?b.customScrollBarRender({y:a.pageY,x:null}):b.customScrollBarRender({y:null,x:a.pageX})},100)}),c(document).one("mouseup",function(){c(document).off("mousemove");c(l).removeClass("user_select_none")}));if(a.hasClass("scrollButtonWrapper"))c(this).one("mouseup",function(a){d?b.customScrollBarRender({y:a.pageY,x:null}):b.customScrollBarRender({y:null,x:a.pageX});c(l).removeClass("user_select_none")});a.hasClass("scrollBar_arrow")&&(a.parent().hasClass("v")?a.hasClass("prev")?b.customScrollBarRender({top:240,y:null}):b.customScrollBarRender({top:-240,y:null}):a.hasClass("prev")?b.customScrollBarRender({left:240,x:null}):b.customScrollBarRender({left:-240,x:null}))});b.customScrollBarRender({y:0,x:0});return this}}(),customScrollBarRender:function(f){var d=c(this).hasClass("scrollBarWrapper")?c(this):c(this).children(".scrollBarWrapper"),h=d.parent(),h=h[0].tagName.toLowerCase()==="body"?window:h[0],j=c(h).width(),k=c(h).height(),g=d.prevAll().not(".scrollBar"),l=d.nextAll().not(".scrollBar"),b,e=d.nextAll(".v.scrollBar"),q=e.children(".scrollBar_arrow").height(),m=e.width(),a=k,t=e.children(".scrollButtonWrapper"),n,u=e.offset().top,o=e.find(".scrollButton"),p=d.nextAll(".h.scrollBar"),s=p.children(".scrollBar_arrow").width();n=p.height();var h=j,v=p.children(".scrollButtonWrapper"),w=p.offset().left,r=p.find(".scrollButton"),i;d.prepend(g);d.append(l);d.css({position:"absolute",width:j,height:k});d.css({width:"auto",height:"auto"});g=d.width()+m;l=d.height()+n;d.css({width:j,height:k});j=g/j;k=l/k;k>1&&j>1&&(a-=n,h-=m);n=a-2*q;m=h-2*s;e.height(a);p.width(h);t.css({height:n,top:q});v.css({width:m,left:s});k>1?(e.show(),e=n/k,o.height(e),f?f.y!==null?b=f.y-u-0.5*e-q:f.top!==void 0&&(f.top*=15,b=parseFloat(o.css("top"))-f.top/l*e):(b=-parseFloat(d.css("top")),b=b/l*a),a=n-e,b=b<0?0:b,b=b>a?a:b,d.css({top:-(b/n)*l}),o.css({top:b})):e.hide();j>1?(p.show(),o=m/j,r.width(o),f?f.x!==null?i=f.x-w-0.5*o:f.left!==void 0&&(f.left*=15,i=parseFloat(r.css("left"))-f.left/g*o):(f=-parseFloat(d.css("left")),i=f/g*h),a=m-o,i=i<0?0:i,i=i>a?a:i,d.css({left:-(i/m)*g}),r.css({left:i})):p.hide()}})})(jQuery);
