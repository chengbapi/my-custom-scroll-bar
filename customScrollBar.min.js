(function(c){c.fn.extend({customScrollBar:function(){var f=c("<div class='prev scrollBar_arrow'></div>"),d=c("<div class='next scrollBar_arrow'></div>"),h=c("<div class='v scrollBar'><div class='v scrollButtonWrapper'><div class='v scrollButton'></div></div></div>"),j=c("<div class='h scrollBar'><div class='h scrollButtonWrapper'><div class='h scrollButton'></div></div></div>"),k={arrow:false,vertical:true,horizental:true};return function(g){var l=this,a,e,g=c.extend(k,g),q=g.arrow,m=g.vertical,g=g.horizental;c(this).css({overflow:"hidden"});c(this).wrapInner("<div class='scrollBarWrapper'></div>");a=c(this).children(".scrollBarWrapper");m&&a.after(h);g&&a.after(j);q&&a.siblings(".scrollBar").prepend(f).append(d);a.add(".v.scrollBar",a.parent()).on("mousewheel DOMMouseScroll",function(b){b=b.originalEvent;b.wheelDelta?e=b.wheelDelta:b.detail&&(e=-b.detail*40);a.customScrollBarRender({top:e,y:null});return false});a.nextAll(".scrollBar").on("mousedown",function(b){var b=c(b.target),d=b.hasClass("v");c(l).addClass("user_select_none");b.hasClass("scrollButton")&&(c(document).on("mousemove",function(b){setTimeout(function(){d?a.customScrollBarRender({y:b.pageY,x:null}):a.customScrollBarRender({y:null,x:b.pageX})},100)}),c(document).one("mouseup",function(){c(document).off("mousemove");c(l).removeClass("user_select_none")}));if(b.hasClass("scrollButtonWrapper"))c(this).one("mouseup",function(b){d?a.customScrollBarRender({y:b.pageY,x:null}):a.customScrollBarRender({y:null,x:b.pageX});c(l).removeClass("user_select_none")});b.hasClass("scrollBar_arrow")&&(b.parent().hasClass("v")?b.hasClass("prev")?a.customScrollBarRender({top:240,y:null}):a.customScrollBarRender({top:-240,y:null}):b.hasClass("prev")?a.customScrollBarRender({left:240,x:null}):a.customScrollBarRender({left:-240,x:null}))});a.customScrollBarRender({y:0,x:0});a.on("DOMSubtreeModified",function(){setTimeout(function(){a.customScrollBarRender()},1)});return this}}(),customScrollBarRender:function(f){var d=c(this).hasClass("scrollBarWrapper")?c(this):c(this).children(".scrollBarWrapper"),h=d.parent(),h=h[0].tagName.toLowerCase()==="body"?window:h[0],j=c(h).width(),k=c(h).height(),g=d.prevAll().not(".scrollBar"),l=d.nextAll().not(".scrollBar"),a,e=d.nextAll(".v.scrollBar"),q=e.children(".scrollBar_arrow").height(),m=e.width(),b=k,t=e.children(".scrollButtonWrapper"),n,u=e.offset().top,o=e.find(".scrollButton"),p=d.nextAll(".h.scrollBar"),s=p.children(".scrollBar_arrow").width();n=p.height();var h=j,v=p.children(".scrollButtonWrapper"),w=p.offset().left,r=p.find(".scrollButton"),i;d.prepend(g);d.append(l);d.css({position:"absolute",width:j,height:k});d.css({width:"auto",height:"auto"});g=d.width()+m;l=d.height()+n;d.css({width:j,height:k});j=g/j;k=l/k;k>1&&j>1&&(b-=n,h-=m);n=b-2*q;m=h-2*s;e.height(b);p.width(h);t.css({height:n,top:q});v.css({width:m,left:s});k>1?(e.show(),e=n/k,o.height(e),f?f.y!==null?a=f.y-u-0.5*e-q:f.top!==void 0&&(f.top*=15,a=parseFloat(o.css("top"))-f.top/l*e):(a=-parseFloat(d.css("top")),a=a/l*b),b=n-e,a=a<0?0:a,a=a>b?b:a,d.css({top:-(a/n)*l}),o.css({top:a})):e.hide();j>1?(p.show(),o=m/j,r.width(o),f?f.x!==null?i=f.x-w-0.5*o:f.left!==void 0&&(f.left*=15,i=parseFloat(r.css("left"))-f.left/g*o):(f=-parseFloat(d.css("left")),i=f/g*h),b=m-o,i=i<0?0:i,i=i>b?b:i,d.css({left:-(i/m)*g}),r.css({left:i})):p.hide()}})})(jQuery);
